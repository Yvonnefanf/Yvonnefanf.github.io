<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Comparable XAI Launcher</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .control { margin-bottom: 10px; }
    label { margin-right: 8px; }
    select, input { margin-right: 16px; }
    .url-display { margin-top: 10px; }
    .url-display a { color: #0074d9; text-decoration: none; }
    .url-display a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <!-- <h1>Comparable XAI Launcher</h1> -->
  <div class="control">
    <label for="domain">Domain:</label>
    <select id="domain">
      <option value="house">House Price</option>
      <option value="energy">Energy</option>
      <option value="salary">Salary</option>
    </select>
    <label for="xaiType">XAI Type:</label>
    <select id="xaiType">
      <option value="noXAI">No XAI</option>
      <option value="comparable">Example based XAI</option>
      <option value="linear_reg">Linear Regression</option>
      <option value="linear_adjustments">Linear Adjustments</option>
      <option value="trace">Trace Adjustments</option>
    </select>
    <label for="instance">Instance:</label>
    <input id="instance" type="number" value="0" min="0" />
    <button id="loadBtn">Load</button>
  </div>
  <div class="url-display">
    Iframe URL:&nbsp;
    <a id="frameUrlLink" href="iframe.html?domain=house&tab=0&instance=0" target="_blank">
      https://yvonnefanf.github.io/ComparableXAI/iframe.html?domain=house&tab=0&instance=0</a>
  </div>
<div style="display:flex;">    
  
  <iframe style="height: 450px;" id="xaiFrame" src="iframe.html?domain=house&tab=0&instanceId=0" width="40%" height="450" frameborder="0"></iframe>
  <iframe id="xaiFrame3" src="iframe.html?domain=house&tab=0&instanceId=0" width="60%" height="450" frameborder="0"></iframe>

</div>
<div style="display:flex;">
  <iframe id="xaiFrame2" src="iframe.html?domain=house&tab=0&instanceId=0" width="40%" height="450" frameborder="0"></iframe>
  <iframe id="xaiFrame4" src="iframe.html?domain=house&tab=0&instanceId=0" width="60%" height="450" frameborder="0"></iframe>
</div>

  




  <script>
        // parse query params
        function getParam(key, defaultValue) {
          const params = new URLSearchParams(window.location.search);
          return params.has(key) ? params.get(key) : defaultValue;
        }

    const initInstance = Number(getParam('instanceId', 0));
    // const domainMap = { house: 0, salary: 1, energy: 2 };
    document.getElementById('instance').value = initInstance

    const initDomain = getParam('domain', 'house');
    // const domainMap = { house: 0, salary: 1, energy: 2 };
    document.getElementById('domain').value = initDomain

    function updateFrame() {
      
      const d = document.getElementById('domain').value; // now a string
      const x = document.getElementById('xaiType').value;
      const i = document.getElementById('instance').value;
      history.replaceState(null, '', `?instanceId=${i}&domain=${d}`);
      const url = `iframe.html?domain=${d}&xaiType=comparable&instanceId=${i}&testing=true`;
      const frame = document.getElementById('xaiFrame');
      frame.src = url;
      const link = document.getElementById('frameUrlLink');
      link.textContent = url;
      link.href = url;

      const url2 = `iframe.html?domain=${d}&xaiType=linear_reg&instanceId=${i}`;
      const frame2 = document.getElementById('xaiFrame2');
      frame2.src = url2;

      const url3 = `iframe.html?domain=${d}&xaiType=linear_adjustments&instanceId=${i}`;
      const frame3 = document.getElementById('xaiFrame3');
      frame3.src = url3;

      const url4 = `iframe.html?domain=${d}&xaiType=trace&instanceId=${i}`;
      const frame4 = document.getElementById('xaiFrame4');
      frame4.src = url4;
    }

    // Initialize display on load
    updateFrame();

    // Update on button click and when controls change
    document.getElementById('loadBtn').addEventListener('click', updateFrame);
    ['domain', 'xaiType', 'instance'].forEach(id => {
      document.getElementById(id).addEventListener('change', updateFrame);
    });
  </script>
</body>
</html>

<!-- iframe.html remains unchanged -->